import{_ as A,c as w,a as s,t as x,f as L,b as B,F as T,e as W,g,o as C,n as P,h as R,p as j,i as D,r as O}from"./index-IgGSzBGQ.js";var _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E={exports:{}};(function(o,r){(function(h,f){f()})(_,function(){function h(t,e){return typeof e>"u"?e={autoBom:!1}:typeof e!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function f(t,e,u){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){v(n.response,e,u)},n.onerror=function(){console.error("could not download file")},n.send()}function d(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return 200<=e.status&&299>=e.status}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _=="object"&&_.global===_?_:void 0,i=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(t,e,u){var n=c.URL||c.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener",typeof t=="string"?(l.href=t,l.origin===location.origin?a(l):d(l.href)?f(t,e,u):a(l,l.target="_blank")):(l.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(l.href)},4e4),setTimeout(function(){a(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,u){if(e=e||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(h(t,u),e);else if(d(t))f(t,e,u);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){a(n)})}}:function(t,e,u,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return f(t,e,u);var l=t.type==="application/octet-stream",S=/constructor/i.test(c.HTMLElement)||c.safari,F=/CriOS\/[\d]+/.test(navigator.userAgent);if((F||l&&S||i)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var m=b.result;m=F?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=m:location=m,n=null},b.readAsDataURL(t)}else{var k=c.URL||c.webkitURL,y=k.createObjectURL(t);n?n.location=y:location.href=y,n=null,setTimeout(function(){k.revokeObjectURL(y)},4e4)}});c.saveAs=v.saveAs=v,o.exports=v})})(E);var M=E.exports;const U="/DAO_Taiwan_Vue/assets/logo_small-n2mYl6OL.png",I="/DAO_Taiwan_Vue/assets/conbon_c-bm_N2DFX.png",H={data(){return{selectedProduct:null,message:" ",painting:!1,canvas:null,ctx:null,colors:["#C73232","#E6A34B","#EBC352","#FDF673","#D4DAAC","#9BEC58","#4234E9","#A0BEBA","#DDE9F1","#D59CF9"],currentColor:"#C73232",backgroundColor:"#FFFFFF",appWidth:0}},computed:{canvasWidth(){return this.appWidth}},methods:{updateAppWidth(){this.appWidth=this.$refs.appContainer.offsetWidth},changeColor(o){this.ctx.strokeStyle=o,this.currentColor=o,this.eraser(!1)},clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.backgroundColor="#FFFFFF",this.eraser(!1)},fillCanvas(){this.ctx.fillStyle=this.currentColor,this.backgroundColor=this.currentColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},startPainting(o){this.painting=!0,this.draw(o)},paintingSelect(){this.ctx.strokeStyle=this.currentColor},finishedPainting(){this.painting=!1,this.ctx.beginPath()},draw(o){if(!this.painting)return;const r=o.touches[0].clientX-this.$refs.canvas.offsetLeft,h=o.touches[0].clientY-this.$refs.canvas.offsetTop;this.ctx.lineWidth=10,this.ctx.lineCap="round",this.ctx.lineTo(r,h),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(r,h)},eraser(o){o?this.ctx.strokeStyle="#FFFFFF":this.ctx.strokeStyle=this.currentColor},saveCanvas(){const o=document.createElement("canvas"),r=o.getContext("2d"),h=1024,f=1024;o.width=h,o.height=f,r.drawImage(this.canvas,0,0,h,f),o.toBlob(d=>{M.saveAs(d,"canvas_image.png")},"image/png")}},mounted(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.updateAppWidth(),window.addEventListener("resize",this.updateAppWidth),this.canvas.height=window.innerWidth*.9,this.canvas.width=576,this.ctx.strokeStyle=this.colors[0];const o=JSON.parse(localStorage.getItem("selectedProduct"));o&&(this.selectedProduct=o)},beforeUnmount(){window.removeEventListener("resize",this.updateAppWidth)},updated(){this.updateAppWidth()}},p=o=>(j("data-v-591a1595"),o=o(),D(),o),V=p(()=>s("h1",null,"繪製貼圖",-1)),N={key:0},z={class:"my-0 mx-auto d-flex justify-content-between align-items-center"},X={href:"#",class:"button-circle"},q=p(()=>s("img",{class:"logo_sm",src:U,alt:"logo_sm"},null,-1)),G=p(()=>s("a",{class:"done-button",href:"#"},"完成",-1)),Y={id:"app",class:"position-relative",ref:"appContainer"},J={class:"canvas-container"},K=["width","height"],Q=p(()=>s("img",{src:I,class:"overlay-img",alt:"conbon_c"},null,-1)),Z={class:"color-picker"},$=["onClick"],tt={class:"tool-list d-flex"},et=p(()=>s("i",{class:"fas fa-paint-brush"},null,-1)),nt=[et],st=p(()=>s("i",{class:"fab fa-bitbucket"},null,-1)),ot=[st],at=p(()=>s("i",{class:"fas fa-eraser"},null,-1)),it=[at],rt=p(()=>s("i",{class:"fas fa-trash"},null,-1)),lt=[rt],ct=p(()=>s("i",{class:"fas fa-save"},null,-1)),dt=[ct];function ut(o,r,h,f,d,a){const c=O("ion-icon");return C(),w("div",null,[V,d.selectedProduct?(C(),w("div",N,[s("h2",null,"選中的物件: "+x(d.selectedProduct.name),1),s("p",null,"物件描述: "+x(d.selectedProduct.description),1)])):L("",!0),s("nav",z,[s("a",X,[B(c,{name:"chevron-back-outline"})]),q,G]),s("div",Y,[s("h2",null,x(d.message),1),s("div",J,[s("canvas",{onMousedown:r[0]||(r[0]=(...i)=>a.startPainting&&a.startPainting(...i)),onMouseup:r[1]||(r[1]=(...i)=>a.finishedPainting&&a.finishedPainting(...i)),onMousemove:r[2]||(r[2]=(...i)=>a.draw&&a.draw(...i)),id:"canvas",width:a.canvasWidth,height:a.canvasWidth},null,40,K),Q]),s("div",Z,[(C(!0),w(T,null,W(d.colors,i=>(C(),w("div",{key:i},[s("div",{class:P(["color-box",{currentColor:i===this.currentColor}]),style:R({backgroundColor:i,outlineColor:i}),onClick:v=>a.changeColor(i)},null,14,$)]))),128))]),s("div",tt,[s("a",{class:"painting-button",onClick:r[3]||(r[3]=g((...i)=>a.paintingSelect&&a.paintingSelect(...i),["prevent"]))},nt),s("a",{class:"fill-button",onClick:r[4]||(r[4]=g((...i)=>a.fillCanvas&&a.fillCanvas(...i),["prevent"]))},ot),s("a",{class:"eraser-button",onClick:r[5]||(r[5]=g(i=>a.eraser(!0),["prevent"]))},it),s("a",{class:"clear-button",onClick:r[6]||(r[6]=g((...i)=>a.clearCanvas&&a.clearCanvas(...i),["prevent"]))},lt),s("a",{class:"save-button",onClick:r[7]||(r[7]=g((...i)=>a.saveCanvas&&a.saveCanvas(...i),["prevent"]))},dt)])],512)])}const ft=A(H,[["render",ut],["__scopeId","data-v-591a1595"]]);export{ft as default};
