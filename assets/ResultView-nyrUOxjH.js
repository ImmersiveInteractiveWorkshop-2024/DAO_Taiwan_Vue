import{io as f}from"https://cdn.socket.io/4.7.5/socket.io.esm.min.js";import{_ as p,c as l,a as s,f as A,b as w,w as C,h as k,d as n,F as m,r as b,o as i,p as U,e as v}from"./index-ies3jRF1.js";import{_ as I}from"./logo_small-1d6l-dhM.js";const B="/assets/logo_white-AiIJoPJw.png",y="/assets/streetlight-La1yFIpG.png",D="/assets/toggle-light-Mn1Hd3bC.png",x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAnCAYAAACfdBHBAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAPqSURBVFhHvVhLUhsxEGXAsA05AeYEgRNg7yjbVMwFApwAWGUJnCBwgtgnwJSBYoe5QAInyHCCmGwBO++ppKm2rPlrUJVrxrbU/fqpf1KwkHNsb2/Xa7XaXhAEq9PpdAPLV/HO5wK+P+J9hNfR0tLSw2AwGOcUn2t6kHV2u90m4H18GlnX0BjM7V1fX19kXZNnXir4TqfTAOBLMpxHsJyrjTiGEdwVbyMRPICfAPipQ1t/MpnQRR7xHN/e3pLhBRqKB43lc8ux7hzudObLnZzgtV9fGl/W/vwMBs+Xl5d7WZR3u93V9/f3LtdAzidhSPj6+tq8u7sLy27BHHit9I/lJldgbD8LaBuQltfD71/Nf3QjBH2ziDwpfw48tv5eBiXc4vjm5ua8LEs7OzvchZ7ZBbyPEAPNMnJnwCOjHC0uLv4QDDV9BhkM2IfsnwJwbzgcHhQ1IALfarU24Bq/BfAzAHcFa1Fdap1PgiLwYIV+XtfIHsAIM0YlA7oYA3sUXsZ9FHjJOoS9vL29bfjIBnGW6yD+a/5H9lkvok+Bl0zgax+s0zcrHRb7AwQya8BTngxkwJMFVUGRmzdN0akSva7c9y4ddCUYE+LZT0oYgRSCyU+YrJqsjxhgfwQ9rkocqachcOMDl1sFVvR/iMsYZDrWohoCoHUwvhZD3AHcmYEeDTJ/igUn/AWLK0mPeXeRRqHedLGOXaw0ZsaAwArWOevyKvY938JH8bvYgQFfCD7yOzDvtaKSQR/BbxkQAvy6AU8rTNMUWVWWQbgjW+YvkHMFZXSBUgPyQuFCykNsn79AtjkqpUUvBltTIweKUg89aTqtvkixb6fKR4DfTBOU5X/f4KlTss96ZIpUxFLRUm0bVAV46fts1Q146fdeMk4V4O20rsDLQlWmy5PsVwGeBxro4GWAqkkKvD6zMjuos6aP01MV4J3M2+zj+xi+v1mkTTXsVwHeyve7MylM5OZShwQa4Bu8fTGA9vnzDHjHUTC24lIYur1DfPquHUoDr/uXLdwi9LP08CCWVyiHemdVA+m6PVCNGk9UEFyPEyx2aYyc27TbgCTwVsFJ7WTtg7tJ587KR1ZWVlbCJEascj1nQBx4xw1CYvtgz5edb+GyrbedJx5zGzZjgAu8A8gTdrcRR5LD0Af4etfMLwyevpdkgA0+L3Ad9D081S0Dxpx7lQKfZIC8A8I8XixFl008biYxbtKtuSrE/NDVMJYGH2cAfndeiWcFLqt13LsX8DEGzOn0CZzCvYFPM8A3cO/g4wyoAngl4IUBv5BGAwD/h+Bcy1JFs/i5nOPVbaRgdKotgP6GDvU7qu9zXmBZ5v8HKDWkCJ3bDL0AAAAASUVORK5CYII=",L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAnCAYAAACfdBHBAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAARDSURBVFhHvVm9chMxENbKEJeEkhnADj3DOZPYdNgtDeYFwHmCkIoSeAKcJ8B+goQnwOlIYOJLRckZmKEkMBQ4ibWs5Ois053t+40bZ8bS6ttPu9/uKsASfn46D6tnXDxnDFcRuSO/AYC+6S9EFwAHIPhgwsYHa657mtB8ouUQd/XIqT9HgA4Aa8bdo5xB6FXcw924e5KsWwr+u7PRnADfI3ZXkxg210onSih27rifB2ltRO1bCH60Xn/FGLwObUTsMwCXi4kLDE5vu59cuUY6KjhvIrImOfsofKDoCnH+Jq9wigQv43oMQrKtYnkaz2xEIUOHj3txDv/qOKsldr0tOHTJwRuGHa+M0LrlfvSy3kIIvDwUYOVrIEyQvRc47sQBbQOS9jiUewzYk5kD6CKetdLYM+2HwHu1xgcrKXcqx4fdrCx9c+p0C6ynb4FuclAdHray2A2AH603XpCxt9ogxXQrzyT75mx2kPN3BuAeEbOV1gEf/A9n05lwPpwZwjeV46NwsqY96XJfngT54ClcKM5ZdZqceFAdHjUz4py7fVSrUw4AFTolBKnDR4E3WUeGv8uCO3mowTz0Kol5+Zf+fUXAWprzFHiTCaKiXxkedYpiXdsNsM9wv4TYvcDzkyQKpMB7tfovLY0lIWq66BTpwLSglT5EnSFDiULYI8HoLxIMMI1QrJ9QrPuFqUjwl6QRyKhKbMgGOUJFbSsqrCCQ/VcUMhqazLULAKOGQJUYr0SRBkJs3XU/9czfCHyd5BCoh1G5X4g8Jr3BqYBAG1F1sb4ztgNgJk6Ud0kPznt9QEzIOAh8etc92pfnACWrH3d5V1TJYB7Jb9UFj9qKNQV+VGvs66bJ9Corg0QKTVXwgFFTVxketrPba3g6hHSEWDHPdqnXkP1N5g8JAWojZHPp0LPsQLMvIilV7NtS6ZJU1pYZivN73uCn0jpjX9ajaYU1WEpbqm2HigBvJe/OZXtgxn1YT+MwfSXgLVnXzPt9fJYuz3SgCOblQIMc9nRNUuDVzMqFHKb1rJl5eioCvF1QfRUw2wTqcU7LyGtp2lTNfiHgjTlAynpAwnxtlo1ChiHBFoE8pNJ+GKBXjJsB8PYouKjiTgeKle0VwftRN7SMeXUW448EG/fj9PBkTzZw2+pmLxvIUPHQcSUnKhRn1XmG9S3JELuG2LLbgEXgA4N4jE7WHty1nEdWPsnKOTv3FjFiFowoB+aBD70gLGkfwi8Os843ddlWvTiHwewdJngDUeBtIHL4ocen5jySItYf0Pq2Xp8avAy9RQ7Y4JMCV0lvqEvUbJ0J/CIHzDcg2QWaj03LGNdyazwVelENY2bw8xyY9yQeF3icliQX8FEORB2eJ3BpPzfwyxzIG3ju4Oc5UATwQsD7DjA4Bk7/XkP8Q/JWiVNF48S5uSbXsDENf7+/8Vhcg2eTf39f3vvyZZQUWJz1/wEyBu67P0jKqQAAAABJRU5ErkJggg==",H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAO3SURBVFhH7VmxbhpBEM0Z3FiRQrp0cdo0IV2KSLl0Ftgy+QLjLzB8QfAXGHfpQpq0xsJGpjL+ApPeUkiXLqS2gbx33kXLcrcsy3KOopyEz9zNzrx9Ozs7MwSPDNfW1tZmNpvdhUiIT46fIAjypjEO7wbj8bgHvb3hcPil3W73knQEcS8EyCMoKDkYX2oIgHeh4PDs7Iz3qWsG7M7OzhEkKktZ9DO43mq1qqqqKbAA+hkvy6oAZvobDHflUuE+8IPlXgt0b0InXauE/59ruhsAvC+fTcDqQKHgBwbXINzwCc6kCxjKsFuH3SdSbjQaVc/Pz+vRxPhne3s7hMClougqk8mUms2mVxZtJl0qlXJ3d3dd4Hkl5W9vb19cXFz0JdhLvAz5EjP7Buf2veNtcE5kxAZnhIgYBqZjYKoEhUIhDxavpSRevI/bibo1jsMSDTjjhZBYCmO1awD7UYgP4I5Pg2KxWFlbW2MEmMuqWKIDKGG0YNzl1aefYYLHljisxMju+vr6d8V3XwZw6iYeMPATLONbLUkbZsulmfiSJje1c60QzRFS7eHA2A/w4Fo5lT6AboKfubRlSTKz7zN6qEQC7AGZHdv4K8AO1JASh5axGCvz2ger1KESBN2frMDq/mMCA2Zjj3CXCWhgv/57YMWS9GOOQ52wUzDrLflxYlb3n6QltY3Rti7hDJYGsBkbuO0lbC5j2LMFqMotBVYALuPOhCM6kkVGxkOh6wLINGZpsL4B/QebJqPS1l/rBkio9pBQhdgLmwDbRUZ3iu+sHqLMC8/tDoVVsioyuROZT2u2+vhO8Pdg1czGd5ycN0mRS59IQCZ5ySxDzjuB3irxngfC5j1iNk86FqgyLzYOezCwLAwFUJt5RTIPAjau3LdBnDpYV6BLMQuju/K4ZYgx9adoSOx4VtDOVfPCzIr+AjdFFE6Uq44K+TCuz+ADaCyzeBhbQ9EgaiAG58QeGEsavK+qCY0I9OymWO34RUPXTJpnYDNRNzuBCUHeZi/FysS5QdT5kH42j01nyw4D5Qmmdj6uUJaELmw62F9oiCzFeZLwyJPBl+BrC2lKQRhg3wRi8/xKwZ6zCfaI4Z65qMY31VbOFjwOlG2tCOwiTQyPGKxUkVX0a/OT/ixHqd1EKy3pCU36b/pvCg1giC2108M2ZWnqkJrpS5FhRoN5TbhVgufvGdBf1sv7xN/B0Mhl+EqVZYJkY1r+4KETYuz4hWH4eGNj4y0KN2ZLz1bE5g1i6E9kb71Op3NjsvEH3WCi9/WLzV8AAAAASUVORK5CYII=",V="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAP8SURBVFhH7VlBTxNREH7zViFRE/GmidBy5eK2kZaDifUXgL+A8gsov8DyCyg3b+DFK/ALKDcppqwHbiS0aKI369FC3zizZWF3u7u87S61Mb7ERLbz3nzvezPzZuaBiBjfzYVsV+AiSiwJhCkhcAoAzKg5cX9DxI4QYAEoy1Diw3PryApbA4J+YJC/pdoAAUtxlSeVRxR1A3vr09bnun+tAbDt/PyGELKSVGny+aqWaR6tudfxgG3ni1v0Y9ktgAJ/AUJdAFqghAVC0bGlN1BAFqU0idElAJHxrbydaR6uON+uwfqB0uS2RFWdsY6204MWvdK5OV9WEmpkfo9dkmsEuMZ/22C/mi9LShr7jgAZ/QFid2nWslJlUWfTZ6ZJTjxRJ0d+4chPKJh9Zn1q2WBbueI+HUGJ/09Av2SPG6l6vA5It8yVg5PJXTO8SexW4Js5b/akPHaEpeq9CfJEv0KeZwijwzuOC0ZHvp0vVOng310R2CECnwDZKns+RYDbWeUjknJiley5QsdEcZfniBagqGWsw00dELoydoyXeHZtmt2LOWjnirtkuYv9j7ieaTZoR8GjlStQ8L6xJZ+Ux3N1QUXJufWBUitAH46dWwkUvp2xGrtBC7iPJUwBL5hm9PAQiWqVzQB17LWVL3R8IWUAMzmnRbaVS4NVXsNDEOJ7LbB++4kCQ14beIUPswGPkyn8+O+BZVYoFrcCrkMvYSj2MseHqSU/QzE7YD8hZ6obo3VNYmiwNuBcYVsALAcriw57ugDdconA8kJ2sgFQpthsX8mckUns1XRuvbiAE4ONqzCJ/H+wSdiLmju2zLbNwrKQUKLEKAuAdUPhXk9yDXiVeeleCnfFHK/bT7Ynd5x82q3LzuhAZPkbMlh3ZpN2nLxtk5wTX4JkoDagqOGA5RLiNQuOEuy5WVhSILacvHhswXKspoqWK2nt8VeYDSr3dRCPHOywQN0OFttmz80i97/s65ZDTFR/6sbjJ6iCHr5PFptZ7i/0wCCn8Huvqil1sR7UZ7jqAyQCGshsWA3Vr2rvU1kc3gPjksZAteZOaDjQI4iarsfHCl1B1W04m+FLcycwKMjrOFKYzIAZkKDd+XDs7DY2kyiPO9cG6+t8HFB1WhqGzbjKY8tzKc43CUrYuZmMVUoe6N94DXV5uQB955n8OV7QvGi4R5xtNqbsGj+6thqHbfTrOxtsnCbGqKEzq5NKmtf9WZtdVzdx1ICi9Ln7b943hchSe/Rb8F9SAa81xQpRT/bh6euPFCm/Z9DzUtlf3oe+g3VBVcMbGneDnUHSzUdPSv0HD/+I7PidzM09enDv4SthUEMDxdO7gAgSTqlR8kN2L6zpk+ZplI4/z5yVX53ng8kAAAAASUVORK5CYII=",c=f("https://daotaiwanapi.onrender.com",{withCredentials:!1}),R={data(){return{resultDataReady:!1,resultImageGet:!1,resultData:null,textureCookie:null,textureId:null,lightMode:!1,message:null}},methods:{toggleDarkMode(){document.querySelector(".app").classList.toggle("active"),this.lightMode=!this.lightMode;const e=document.querySelector(".toggle-switch");e.classList.toggle("active"),document.querySelector(".toggle-light").classList.toggle("active"),console.log(this.textureId),document.querySelector(".overlay").classList.toggle("active"),(this.resultImageGet!=null||this.textureId!=null)&&(e.classList.contains("active")?this.lightControllById(this.textureId,this.resultData.category,"light-on"):this.lightControllById(this.textureId,this.resultData.category,"light-off"))},lightControllById(t,e,o){try{c.emit(o,{_id:t,category:e})}catch(d){console.error("開關燈失敗:",d)}},fetchResultImage(t){fetch(`https://daotaiwanapi.onrender.com/results/${t}`,{method:"GET"}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{console.log(e),this.resultData=e.data[0],this.resultImageGet=!0,console.log(this.resultData.url)}).catch(e=>{console.error("Error:",e)})},downloadImage(){if(this.resultData){const t=document.createElement("a");t.href=this.resultData.url,console.log(t.href),t.download="DAO-Taiwan-result-image.png",fetch(t.href,{mode:"cors"}).then(e=>e.blob()).then(e=>{const o=window.URL.createObjectURL(e);t.href=o,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(o)}).catch(e=>{console.error("Error downloading image:",e)})}}},updated(){this.checkOrientation()},created(){c.on("result-upload",t=>{console.log("伺服器傳送訊息:",t),console.log(this.textureId,t._id),t!=null&&this.textureId===t._id&&(this.fetchResultImage(this.textureId),this.resultData=t)}),c.on("light-on",t=>{console.log("伺服器傳送訊息:",t)}),c.on("light-off",t=>{console.log("伺服器傳送訊息:",t)})},mounted(){const t=document.cookie.split(";");for(let e=0;e<t.length;e++){const o=t[e].trim().split("=");if(o[0]==="textureCookie"){this.textureCookie=JSON.parse(o[1]),this.textureId=this.textureCookie._id,console.log(this.textureId),this.fetchResultImage(this.textureId);break}}this.checkOrientation()}},g=t=>(U("data-v-91da4fe1"),t=t(),v(),t),z=g(()=>s("h1",{class:"d-none"},"結果頁面",-1)),O={id:"app",class:"position-relative app",ref:"appContainer"},S={class:"my-0 mx-auto d-flex justify-content-between align-items-center"},K={key:0,class:"logo_white mx-auto pt-3",src:B,alt:"logo_white"},Q={key:1,class:"logo_white mx-auto pt-3",src:I,alt:"logo_red"},E={class:"w-25 d-flex d-none"},Y={class:"position-relative"},J=g(()=>s("img",{class:"streetlight",src:y,alt:"streetlight"},null,-1)),j=g(()=>s("img",{src:D,alt:"toggle-light",class:"streetlight toggle-light"},null,-1)),Z=["src"],M=g(()=>s("div",{class:"overlay"},[n("點選按鈕照亮您的招牌"),s("br"),n("試著在場景中找到他吧！！")],-1)),q={class:"d-flex flex-column justify-content-between h-100 pb-5 pt-2 result-content"},X=g(()=>s("div",{class:"toggle-handle"},null,-1)),P=[X],F=g(()=>s("p",{class:"result-text pt-3"},[n("點選按鈕照亮您的招牌"),s("br"),n("試著在場景中找到他吧！！")],-1)),G={class:"d-flex justify-content-between buttons"},N={key:0,src:x,alt:""},_={key:1,src:L,alt:""},T={key:0,src:H,alt:""},W={key:1,src:V,alt:""};function $(t,e,o,d,r,a){const u=b("router-link");return i(),l(m,null,[z,s("div",O,[s("nav",S,[r.lightMode?A("",!0):(i(),l("img",K)),r.lightMode?(i(),l("img",Q)):A("",!0),s("div",E,[w(u,{class:"done-button",to:"/home"},{default:C(()=>[n("家")]),_:1})])]),s("div",Y,[J,j,this.resultData?(i(),l("img",{key:0,src:this.resultData.url,class:"result-image position-relative",alt:"result-image"},null,8,Z)):A("",!0),M]),s("div",q,[s("div",{class:"toggle-switch mx-auto",onClick:e[0]||(e[0]=(...h)=>a.toggleDarkMode&&a.toggleDarkMode(...h))},P),F,s("div",G,[s("a",{class:"upload-button",href:"#",onClick:e[1]||(e[1]=k((...h)=>a.downloadImage&&a.downloadImage(...h),["prevent"]))},[r.lightMode?A("",!0):(i(),l("img",N)),r.lightMode?(i(),l("img",_)):A("",!0),n(" 下載街景")]),w(u,{class:"upload-button",to:"/gallery"},{default:C(()=>[r.lightMode?A("",!0):(i(),l("img",T)),r.lightMode?(i(),l("img",W)):A("",!0),n(" 大家ㄉ庫")]),_:1})])])],512)],64)}const ot=p(R,[["render",$],["__scopeId","data-v-91da4fe1"]]);export{ot as default};
